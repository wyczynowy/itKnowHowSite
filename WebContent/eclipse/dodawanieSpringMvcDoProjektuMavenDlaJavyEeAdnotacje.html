<h1>Dodawanie Spring MVC do projektu Maven - Java EE - konfiguracja na adnotacjach</h1>
<div class="contentDiv">

	<p>Do wcześniej utworzonego projektu maven dla Javy EE dodamy framework Spring MVC. Aby to zrobić trzeba na początek dodać odpowiednie zależności do pliku 
	<span class="clickDiv">pom.xml</span>. Zatem dodajemy:</p>
	
	<div class="codeDiv">
		&lt;dependency&gt;<br>
			&nbsp;&lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>
			&nbsp;&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;<br>
			&nbsp;&lt;version&gt;5.0.8.RELEASE&lt;/version&gt;<br>
		&lt;/dependency&gt;<br>
		&lt;dependency&gt;<br>
			&nbsp;&lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>
			&nbsp;&lt;artifactId&gt;spring-core&lt;/artifactId&gt;<br>
			&nbsp;&lt;version&gt;5.0.8.RELEASE&lt;/version&gt;<br>
		&lt;/dependency&gt;<br>
		&lt;dependency&gt;<br>
			&nbsp;&lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>
			&nbsp;&lt;artifactId&gt;spring-context&lt;/artifactId&gt;<br>
			&nbsp;&lt;version&gt;5.0.8.RELEASE&lt;/version&gt;<br>
		&lt;/dependency&gt;		
	</div>
	
	<p>Upewniamy się, żę zależność dodająca servlet api ma ustawioną wersję 4.0.0:</p>
	
	<div class="codeDiv">
		&lt;dependency&gt;<br>
			&nbsp;&lt;groupId&gt;javax.servlet&lt;/groupId&gt;<br>
			&nbsp;&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;<br>
			&nbsp;&lt;version&gt;4.0.0&lt;/version&gt;<br>
			&nbsp;&lt;scope&gt;provided&lt;/scope&gt;<br>
		&lt;/dependency&gt;	
	</div>
	
	<p>Należy zadbać o poprawne ustawienia mavena:</p>
	
	<div class="codeDiv">
		&lt;properties&gt;<br>
			&nbsp;&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;<br>
			&nbsp;&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;<br>
			&nbsp;&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;<br>
			&nbsp;&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;<br>
		&lt;/properties&gt;	
	</div>
	
	<p>Poniższa konfiguracja będzie oparta na adnotacjach. Nie będziemy tutaj używać plików xml do konfiguracji Springa ani serwera. Zatem
	wygenerowany plik <code>web.xml</code> należy usunąć, bo zostanie on zastąpiony klasą z odpowiednią konfiguracją. Zatem należy utworzyć klasę
	konfigurującą <code>Dispatcher Servlet</code>. Dla przykładu umieszczamy ją w pakiecie <code>pl.softService.springMVC.configuration</code>:</p>
	
	<div class="codeDiv">
		public class MyDispatcherServlet extends AbstractAnnotationConfigDispatcherServletInitializer {<br>
		<br>
			&nbsp;@Override<br>
			&nbsp;protected Class&lt;?&gt;[] getRootConfigClasses() {<br>
				&nbsp;&nbsp;return null;<br>
			&nbsp;}<br>
		<br>
			&nbsp;@Override<br>
			&nbsp;protected Class&lt;?&gt;[] getServletConfigClasses() {<br>				
				&nbsp;&nbsp;return new Class[] { WebConfig.class };<br>
			&nbsp;}<br>
		<br>
			&nbsp;@Override<br>
			&nbsp;protected String[] getServletMappings() {<br>		
				&nbsp;&nbsp;return new String[] {"/"};<br>
			&nbsp;}<br>
		<br>
		}	
	</div>
	
	<p>
		<code>AbstractAnnotationConfigDispatcherServletInitializer</code> - rozszerzając tą klasę konfigurujemy właśnie Dispatcher Servlet<br>
		<code>WebConfig.class</code> - wskazujemy klasę z konfiguracją Springa MVC<br>
	</p>
	
	<p>Następnie należy utworzyć klasę z konfiguracją Springa, którą wskazaliśmy powyżej podczas konfiguracji Dispatcher Servletu.
	Klasę tą również umieszczamy w pakiecie <code>pl.softService.springMVC.configuration</code>:</p>
	
	<div class="codeDiv">
		@Configuration<br>
		@EnableWebMvc<br>
		@ComponentScan("pl.softService.springMVC")<br>
		public class WebConfig implements WebMvcConfigurer {<br>
		<br>
			&nbsp;@Override<br>
			&nbsp;public void configureViewResolvers(ViewResolverRegistry registry) {<br>
				&nbsp;&nbsp;registry.jsp().prefix("/WEB-INF/views/").suffix(".jsp");<br>
			&nbsp;}<br>
		}	
	</div>
	
	<p>
		<code>@Configuration</code> - ustawienie klasy jako konfiguracji Springa<br>
		<code>@EnableWebMvc</code> - włączenie Spring MVC<br>
		<code>@ComponentScan</code> - włącza skanowanie komponentów w wybranym pakiecie<br>
		<code>configureViewResolvers()</code> - konfiguruje producenta widoków<br>
	</p>
	
	<p>Ostatnią rzeczą jaką należy zrobić jest utworzenie kontrolera, który będzie obsługiwał żądania klienta. Kontroler taki tworzymy przykładowo
	w pakiecie <code>pl.softService.springMVC.controllers</code>:</p>
	
	<div class="codeDiv">
		@Controller<br>
		public class HomeController {<br>
		<br>
			&nbsp;@RequestMapping(value ="/")<br>
			&nbsp;public String home(Model model) {<br>
				&nbsp;&nbsp;model.addAttribute("atribute", "Spring");<br>
				&nbsp;&nbsp;return "home";<br>
			&nbsp;}<br>
		}	
	</div>
	
	<p>
		<code>@Controller</code> - oznacza klasę kontrolera<br>
		<code>@RequestMapping</code> - konfiguruje URL żądania jaki będzie obsługiwany przez kontroler / metodę<br>
	</p>
	
	<p>Plik z widokiem umieszczamy w lokalizacji <code>webapp/WEB-INF/views/</code>:</p>
	
	<div class="codeDiv">
		&lt;!DOCTYPE html&gt;<br>
		&lt;html&gt;<br>
		&lt;head&gt;<br>
		&lt;meta charset="UTF-8"&gt;<br>
		&lt;title&gt;Hello !&lt;/title&gt;<br>
		&lt;/head&gt;<br>
		&lt;body&gt;
			&nbsp;&lt;h3&gt;Hello ${atribute}&lt;/h3&gt;<br>
		&lt;/body&gt;<br>
		&lt;/html&gt;
	</div>
	
	<p>Tak przygotowaną aplikację można skompilować przy użyciu polecenia <code>mvn clean package</code></p>
	
</div>