<h1>Ajax</h1>

<div class="contentDiv">
	<p>Technologia Ajax umożliwia komunikację z serwerem z poziomu javascript. Dzięki tej technologi można wysłać żądanie do serwera, przechwycić
	odpowiedź i zrobić z nią cokolwiek. Poniżej przykład:</p>
	
	<div class="codeDiv">
&lt;head&gt;
	&lt;title&gt;My page&lt;/title&gt;
	&lt;script&gt;
		function myCallback(xhr) {
			if(xhr.readyState &lt; 4) { console.log('xhr.readyState &lt; 4'); return; } // Jeszcze niegotowe
			if(xhr.status !== 200) { alert('Blad !')}; // Kod statusu zadania HTTP jest inny niż OK
			console.log('xhr.responseText');
			alert(xhr.responseText); // Wszystko w porzadku
		}
				
		function sendToServer() {
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = myCallback(xhr);
			xhr.open('POST', 'plik.txt', true);
			xhr.send('');
		}
	&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
	&lt;input onclick="sendToServer();" type="submit" value="zapytaj serwer"/&gt;
&lt;/body&gt;
	</div>
	
	<p>Alternatywnie zamiast metody <code>responseText</code> można użyć <code>responseXML</code>, zwróci ona obiekt XML DOM,
	 czyli będzie można przetwarzać przy użyciu metod document.getElementById() itd...</p>
	 
	 <p>
		<code>var xhr = XMLHttpRequest();</code> - utworzenie obiektu<br>
		<code>xhr.onreadystatechange = myCallback;</code> - przydzielenie obserwatora<br>
		<code>xhr.open('POST', 'plik.txt', true);</code> - arg0 to typ żądania, arg1 to URL żądania, arg2 określa czy asynchroniczne<br>
		<code>xhr.send('');</code> - wysłanie przygotowanego zadania z doklejonym ciągiem znaków,
				 POST pusty łańcuch, GET to łańcuch klucz=wartość&amp;klucz2=wartość2<br>	 	
	 </p>

	<p>
		Statusy gotowości:<br>
		&nbsp;&nbsp;&nbsp;0 - niezainicjowane<br>
		&nbsp;&nbsp;&nbsp;1 - ładuje się<br>
		&nbsp;&nbsp;&nbsp;2 - załadowane<br>
		&nbsp;&nbsp;&nbsp;3 - interaktywne<br>
		&nbsp;&nbsp;&nbsp;4 - zakończone<br>
	</p>
	
</div>